"use strict";(()=>{var e={};e.id=361,e.ids=[361],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},3263:e=>{e.exports=import("firebase-admin/app")},9637:e=>{e.exports=import("firebase-admin/auth")},2929:e=>{e.exports=import("firebase-admin/firestore")},8229:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>p,default:()=>l,routeModule:()=>d});var s=r(9762),i=r(6059),n=r(4718),o=r(4578),c=e([o]);o=(c.then?(await c)():c)[0];let l=(0,n.l)(o,"default"),p=(0,n.l)(o,"config"),d=new s.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/auth/session",pathname:"/api/auth/session",bundlePath:"",filename:""},userland:o});a()}catch(e){a(e)}})},1782:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{I:()=>c});var s=r(3263),i=r(9637),n=r(2929),o=e([s,i,n]);[s,i,n]=o.then?(await o)():o;try{(0,s.getApps)().length?(0,s.getApps)()[0]:((0,s.initializeApp)({credential:(0,s.cert)({projectId:process.env.FIREBASE_PROJECT_ID,clientEmail:process.env.FIREBASE_CLIENT_EMAIL,privateKey:process.env.FIREBASE_PRIVATE_KEY?.replace(/\\n/g,"\n")})}),console.log("Firebase Admin initialized successfully"))}catch(e){console.error("Firebase Admin initialization error:",e)}let c=(0,i.getAuth)();(0,n.getFirestore)(),a()}catch(e){a(e)}})},4578:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>handler});var s=r(1782),i=e([s]);async function handler(e,t){if("POST"!==e.method)return t.status(405).json({error:"Method not allowed"});let{idToken:r}=e.body;try{let e=await s.I.createSessionCookie(r,{expiresIn:432e6});return t.setHeader("Set-Cookie",`session=${e}; Max-Age=432000000; Path=/; HttpOnly; Secure; SameSite=Strict`),t.status(200).json({status:"success"})}catch(e){return console.error("Session creation error:",e),t.status(401).json({error:"Unauthorized request"})}}s=(i.then?(await i)():i)[0],a()}catch(e){a(e)}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[836],()=>__webpack_exec__(8229));module.exports=r})();